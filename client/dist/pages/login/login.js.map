{"version":3,"sources":["/src/pages/login/login.js"],"names":["apiUrl","require","Page","data","username","password","usernameBlur","e","setData","detail","value","console","log","passwordBlur","login","_postLogin","wx","showToast","title","request","url","method","header","success","res","errcode","icon","duration","complete","navigateTo","id"],"mappings":"AAAA,MAAMA,SAASC,QAAQ,iBAAR,CAAf;;AAEAC,KAAK;AACHC,QAAM;AACJC,cAAU,EADN;AAEJC,cAAU;AAFN,GADH;AAKHC,gBAAc,UAAUC,CAAV,EAAa;AACzB,SAAKC,OAAL,CAAa;AACXJ,gBAAUG,EAAEE,MAAF,CAASC;AADR,KAAb;AAGAC,YAAQC,GAAR,CAAY,gBAAZ,EAA8BL,EAAEE,MAAF,CAASC,KAAvC;AACD,GAVE;AAWHG,gBAAc,UAAUN,CAAV,EAAa;AACzB,SAAKC,OAAL,CAAa;AACXH,gBAAUE,EAAEE,MAAF,CAASC;AADR,KAAb;AAGAC,YAAQC,GAAR,CAAY,gBAAZ,EAA8BL,EAAEE,MAAF,CAASC,KAAvC;AACD,GAhBE;AAiBHI,SAAO,YAAY;AACjB;AACA,QAAIX,OAAO;AACTC,gBAAU,KAAKD,IAAL,CAAUC,QADX;AAETC,gBAAU,KAAKF,IAAL,CAAUE;AAFX,KAAX;AAIA,SAAKU,UAAL,CAAgBZ,IAAhB;AACD,GAxBE;AAyBHY,cAAY,UAAUZ,IAAV,EAAgB;AAC1Ba,OAAGC,SAAH,CAAa;AACXC,aAAO;AADI,KAAb;;AAIAP,YAAQC,GAAR,CAAY,cAAZ,EAA4BT,IAA5B;;AAEAa,OAAGG,OAAH,CAAW;AACTC,WAAKpB,OAAOc,KADH;AAETX,YAAMA,IAFG;AAGTkB,cAAQ,MAHC;AAITC,cAAQ;AACN,wBAAgB;AADV,OAJC;AAOTC,eAAS,UAAUC,GAAV,EAAe;AACtBb,gBAAQC,GAAR,CAAYY,GAAZ;AACA,YAAIA,IAAIrB,IAAJ,CAASsB,OAAT,KAAqB,CAAzB,EAA4B;AAC1BT,aAAGC,SAAH,CAAa;AACXC,mBAAO,MADI;AAEXQ,kBAAM,SAFK;AAGXC,sBAAU,IAHC;AAIXC,sBAAU,YAAY;AACpBZ,iBAAGa,UAAH,CAAc;AACZT,qBAAK,6BAA6BI,IAAIrB,IAAJ,CAASA,IAAT,CAAc2B;AADpC,eAAd;AAGD;AARU,WAAb;AAUD,SAXD,MAWO;AACLd,aAAGC,SAAH,CAAa;AACXC,mBAAO,MADI;AAEXQ,kBAAM,MAFK;AAGXC,sBAAU,IAHC;AAIXC,sBAAU,YAAY,CAErB;AANU,WAAb;AAQD;AACF;AA9BQ,KAAX;AAgCD;AAhEE,CAAL","file":"login.js","sourcesContent":["const apiUrl = require('../../utils/api')\n\nPage({\n  data: {\n    username: '',\n    password: ''\n  },\n  usernameBlur: function (e) {\n    this.setData({\n      username: e.detail.value\n    })\n    console.log('usernameBlur: ', e.detail.value)\n  },\n  passwordBlur: function (e) {\n    this.setData({\n      password: e.detail.value\n    })\n    console.log('passwordBlur: ', e.detail.value)\n  },\n  login: function () {\n    // 发送登录请求\n    var data = {\n      username: this.data.username,\n      password: this.data.password\n    }\n    this._postLogin(data)\n  },\n  _postLogin: function (data) {\n    wx.showToast({\n      title: '登录中...'\n    })\n\n    console.log('login data: ', data)\n\n    wx.request({\n      url: apiUrl.login,\n      data: data,\n      method: 'POST',\n      header: {\n        'content-type': 'application/json'\n      },\n      success: function (res) {\n        console.log(res)\n        if (res.data.errcode === 0) {\n          wx.showToast({\n            title: '登录成功',\n            icon: 'success',\n            duration: 2000,\n            complete: function () {\n              wx.navigateTo({\n                url: '/pages/weekly/index?uid=' + res.data.data.id\n              })\n            }\n          })\n        } else {\n          wx.showToast({\n            title: '登录失败',\n            icon: 'fail',\n            duration: 2000,\n            complete: function () {\n\n            }\n          })\n        }\n      }\n    })\n  }\n})\n"]}